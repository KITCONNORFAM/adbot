import os

files = ['PyToday/handlers.py', 'PyToday/keyboards.py', 'PyToday/new_handlers.py']

# Mapping of corrupted text to the correct text
replacements = {
    'Ã¢Å’': 'âŒ',
    'Ã¢â€” ': 'â—',
    'Ã¢â€”â€¹': 'â—‹',
    'Ã¢â€”Å½': 'â—Ž',
    'Ã¢â€”Ë†': 'â—ˆ',
    'Ã¢â€”â€°': 'â—‰',
    'Ã¢â€“Â£': 'â–£',
    'Ã¢â€“ ': 'â– ',
    'Ã¢â€“Â¡': 'â–¡',
    'Ã¢Å¾â€¢': 'âž•',
    'Ã¢Å¾â€“': 'âž–',
    'Ã¢â€”Â¦': 'â—¦',
    'Ã¢â‚¬Â¢': 'â€¢',
    'Ã¢Å“â€¦': 'âœ…',
    'Ã¢Å¡ Ã¯Â¸ ': 'âš ï¸',
    'Ã¢â€žÂ¹Ã¯Â¸ ': 'â„¹ï¸',
    'Ã°Å¸â€ ': 'ðŸ”‘',
    'Ã°Å¸â€œ ': 'ðŸ“œ',
    'Ã°Å¸â€™Â¬': 'ðŸ’¬',
    'Ã°Å¸â€â€ž': 'ðŸ”„',
    'Ã°Å¸â€œÂ¢': 'ðŸ“¢',
    'Ã°Å¸â€œÅ’': 'ðŸ“Œ',
    'Ã°Å¸â€œâ€¦': 'ðŸ“…',
    'Ã°Å¸â€œ ': 'ðŸ“ˆ',
    'Ã°Å¸â€œÅ ': 'ðŸ“Š',
    'Ã°Å¸Å½Â¯': 'ðŸŽ¯',
    'Ã°Å¸â€œÂ±': 'ðŸ“±',
    'Ã°Å¸â€˜Â¥': 'ðŸ‘¥',
    'Ã°Å¸â€™Å½': 'ðŸ’Ž',
    'Ã°Å¸Å¡Â«': 'ðŸš«',
    'Ã°Å¸â€œÂ²': 'ðŸ“²',
    'Ã°Å¸â€â€”': 'ðŸ”—',
    'Ã¢ Â³': 'â³',
    'Ã¢Å“ Ã¯Â¸ ': 'âœï¸',
    'Ã¢â€“Â¶Ã¯Â¸ ': 'â–¶ï¸',
    'Ã¢ Â´Ã¯Â¸ ': 'â¹ï¸',
    'Ã¢ Â¯Ã¯Â¸ ': 'â¯ï¸',
    'Ã¢ Â¸Ã¯Â¸ ': 'â¸ï¸',
    'Ã¢ Â©': 'â©',
    'Ã¢ Â®Ã¯Â¸ ': 'â­ï¸',
    'Ã¡Â´â‚¬': 'á´€', 'Ã¡Â´â€š': 'Ê™', 'Ã¡Â´â€ž': 'á´„', 'Ã¡Â´â€¦': 'á´…', 'Ã¡Â´â€¡': 'á´‡', 'Ã’â€œ': 'Ò“', 'Ã‰Â¢': 'É¢',
    'ÃŠÅ“': 'Êœ', 'Ã‰Âª': 'Éª', 'Ã¡Â´Å ': 'á´Š', 'Ã¡Â´â€¹': 'á´‹', 'ÃŠÅ¸': 'ÊŸ', 'Ã¡Â´ ': 'á´', 'Ã‰Â´': 'É´',
    'Ã¡Â´ ': 'á´', 'Ã¡Â´Ëœ': 'á´˜', 'Ã¡Â´Å¡': 'Ç«', 'ÃŠâ‚¬': 'Ê€', 's': 's', 'Ã¡Â´â€º': 'á´›', 'Ã¡Â´Å“': 'á´œ',
    'Ã¡Â´Â ': 'á´ ', 'Ã¡Â´Â¡': 'á´¡', 'x': 'x', 'ÃŠ ': 'Ê', 'Ã¡Â´Â¢': 'á´¢',
    'ÃŠâ„¢': 'Ê™', 
    'Ã‡Â«': 'Ç«', 
    'Ã¢Å’': 'âŒ',
}

for file_path in files:
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            content = f.read()

        count = 0
        for bad, good in replacements.items():
            if bad in content:
                c = content.count(bad)
                content = content.replace(bad, good)
                count += c
        
        if count > 0:
            with open(file_path, 'w', encoding='utf-8') as f:
                f.write(content)
            print(f'Fixed {count} instances in {file_path}')
        else:
            print(f'No issues in {file_path}')
    except Exception as e:
        print(f'Error processing {file_path}: {e}')
